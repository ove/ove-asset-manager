version: '3'
services:
  ovehub-ove-asset-manager-service:
    image: ovehub/ove-asset-manager-service:latest-unstable
    build:
      context: .
      dockerfile: docker/am/Dockerfile
    ports:
      - "6080:6080"
    volumes:
      - ./config/:/code/config/:ro
    environment:
      GUNICORN_THREADS: "8"
      SERVICE_LOG_LEVEL: "debug"

  ovehub-ove-asset-manager-worker-zip:
    image: ovehub/ove-asset-manager-worker-zip:latest-unstable
    build:
      context: .
      dockerfile: docker/worker-zip/Dockerfile
    ports:
      - "6070:6070"
    environment:
      GUNICORN_PORT: "6070"
      SERVICE_LOG_LEVEL: "debug"
      SERVICE_AM_HOSTNAME: "ovehub-ove-asset-manager-service"
      SERVICE_AM_PORT: "6080"


  ovehub-ove-asset-manager-worker-gigaimage:
    image: ovehub/ove-asset-manager-worker-gigaimage:latest-unstable
    build:
      context: .
      dockerfile: docker/worker-gigaimage/Dockerfile
    ports:
      - "6071:6071"
    environment:
      GUNICORN_PORT: "6071"
      SERVICE_LOG_LEVEL: "debug"
      SERVICE_AM_HOSTNAME: "ovehub-ove-asset-manager-service"
      SERVICE_AM_PORT: "6080"

  ovehub-ove-asset-manager-ui:
    image: ovehub/ove-asset-manager-ui:latest-unstable
    build:
      context: .
      dockerfile: docker/ui/Dockerfile
    ports:
      - "6060:6060"
    environment:
      SERVICE_LOG_LEVEL: "debug"
      SERVICE_AM_HOSTNAME: "ovehub-ove-asset-manager-service"
      SERVICE_AM_PORT: "6080"